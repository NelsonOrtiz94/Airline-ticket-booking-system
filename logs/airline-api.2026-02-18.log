2026-02-18 14:40:41 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2026-02-18 14:40:41 [main] INFO  org.example.Main - Starting Main using Java 21.0.10 with PID 5872 (C:\Users\NelsonAlejandroOrtiz\IdeaProjects\AirplaneTicketBooking\target\classes started by NelsonAlejandroOrtiz in C:\Users\NelsonAlejandroOrtiz\IdeaProjects\AirplaneTicketBooking)
2026-02-18 14:40:41 [main] DEBUG org.example.Main - Running with Spring Boot v3.2.2, Spring v6.1.3
2026-02-18 14:40:41 [main] INFO  org.example.Main - No active profile set, falling back to 1 default profile: "default"
2026-02-18 14:40:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2026-02-18 14:40:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 114 ms. Found 4 R2DBC repository interfaces.
2026-02-18 14:40:43 [main] INFO  o.e.infrastructure.config.JwtService - JwtService initialized with expiration: 86400000 ms
2026-02-18 14:40:43 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executing SQL script from class path resource [schema.sql]
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS reservations CASCADE
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS flights CASCADE
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, username VARCHAR(50) UNIQUE NOT NULL, password VARCHAR(255) NOT NULL, first_name VARCHAR(30) NOT NULL, last_name VARCHAR(30) NOT NULL, email VARCHAR(100) UNIQUE NOT NULL, role VARCHAR(20) NOT NULL DEFAULT 'USER', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP )
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE flights ( flight_id SERIAL PRIMARY KEY, flight_number VARCHAR(20) UNIQUE NOT NULL, origin VARCHAR(30) NOT NULL, destination VARCHAR(30) NOT NULL, departure_time TIMESTAMP NOT NULL, arrival_time TIMESTAMP NOT NULL, available_seats INTEGER NOT NULL, total_seats INTEGER NOT NULL, price DECIMAL(10, 2) NOT NULL, airline VARCHAR(30) NOT NULL, status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP )
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, flight_id INTEGER NOT NULL, user_id INTEGER NOT NULL, passenger_name VARCHAR(30) NOT NULL, seat_number VARCHAR(10) NOT NULL, price DECIMAL(10, 2) NOT NULL, ticket_class VARCHAR(20) NOT NULL DEFAULT 'ECONOMY', status VARCHAR(20) NOT NULL DEFAULT 'CONFIRMED', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (flight_id) REFERENCES flights(flight_id), FOREIGN KEY (user_id) REFERENCES users(user_id) )
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE reservations ( reservation_id SERIAL PRIMARY KEY, user_id INTEGER NOT NULL, ticket_id INTEGER NOT NULL, flight_id INTEGER NOT NULL, status VARCHAR(20) NOT NULL DEFAULT 'CONFIRMED', observations VARCHAR(100), reservation_date TIMESTAMP NOT NULL, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (user_id) REFERENCES users(user_id), FOREIGN KEY (ticket_id) REFERENCES tickets(ticket_id), FOREIGN KEY (flight_id) REFERENCES flights(flight_id) )
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_flights_origin_destination ON flights(origin, destination)
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_flights_departure_time ON flights(departure_time)
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_tickets_user_id ON tickets(user_id)
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_tickets_flight_id ON tickets(flight_id)
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_reservations_user_id ON reservations(user_id)
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_reservations_status ON reservations(status)
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executed SQL script from class path resource [schema.sql] in 76 ms.
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executing SQL script from class path resource [data.sql]
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 1 returned as update count for SQL: INSERT INTO users (user_id, username, password, first_name, last_name, email, role, created_at, updated_at) VALUES (1, 'admin', '$2a$10$dXJ3SW6G7P50lGmMkkmwe.20cQQubK3.HZWzG3YB1tlRy.fqvM/BG', 'Admin', 'System', 'admin@airline.com', 'ADMIN', NOW(), NOW())
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 21 returned as update count for SQL: INSERT INTO flights (flight_id, flight_number, origin, destination, departure_time, arrival_time, available_seats, total_seats, price, airline, status, created_at, updated_at) VALUES (1, 'AV101', 'BOG', 'MDE', '2026-03-15 08:00:00', '2026-03-15 09:30:00', 50, 50, 250000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (2, 'AV102', 'BOG', 'CTG', '2026-03-16 10:00:00', '2026-03-16 11:30:00', 50, 50, 300000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (3, 'AV103', 'BOG', 'CLO', '2026-03-17 12:00:00', '2026-03-17 13:00:00', 30, 30, 280000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (4, 'LA201', 'BOG', 'BAQ', '2026-03-18 14:00:00', '2026-03-18 15:15:00', 80, 80, 180000.00, 'LATAM', 'ACTIVE', NOW(), NOW()), (5, 'AV104', 'BOG', 'SMR', '2026-03-19 07:00:00', '2026-03-19 08:30:00', 40, 40, 320000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (6, 'AV105', 'BOG', 'PEI', '2026-03-20 09:00:00', '2026-03-20 10:00:00', 35, 35, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (7, 'AV106', 'BOG', 'BGA', '2026-03-21 11:00:00', '2026-03-21 12:00:00', 45, 45, 190000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (8, 'AV107', 'BOG', 'ADZ', '2026-03-22 13:00:00', '2026-03-22 15:00:00', 60, 60, 450000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (9, 'AV201', 'MDE', 'BOG', '2026-03-15 10:00:00', '2026-03-15 11:30:00', 50, 50, 250000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (10, 'AV202', 'MDE', 'CTG', '2026-03-16 12:00:00', '2026-03-16 13:30:00', 40, 40, 270000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (11, 'AV203', 'MDE', 'CLO', '2026-03-17 14:00:00', '2026-03-17 15:00:00', 30, 30, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (12, 'WI301', 'CTG', 'BOG', '2026-03-19 16:00:00', '2026-03-19 17:30:00', 60, 60, 220000.00, 'Wingo', 'ACTIVE', NOW(), NOW()), (13, 'WI302', 'CTG', 'MDE', '2026-03-20 08:00:00', '2026-03-20 09:30:00', 45, 45, 270000.00, 'Wingo', 'ACTIVE', NOW(), NOW()), (14, 'LA301', 'CTG', 'CLO', '2026-03-21 10:00:00', '2026-03-21 11:30:00', 35, 35, 290000.00, 'LATAM', 'ACTIVE', NOW(), NOW()), (15, 'AV401', 'CLO', 'BOG', '2026-03-17 13:30:00', '2026-03-17 14:30:00', 30, 30, 280000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (16, 'AV402', 'CLO', 'MDE', '2026-03-18 15:00:00', '2026-03-18 16:00:00', 30, 30, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (17, 'LA401', 'BAQ', 'BOG', '2026-03-18 16:00:00', '2026-03-18 17:15:00', 80, 80, 180000.00, 'LATAM', 'ACTIVE', NOW(), NOW()), (18, 'AV501', 'SMR', 'BOG', '2026-03-19 09:00:00', '2026-03-19 10:30:00', 40, 40, 320000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (19, 'AV601', 'PEI', 'BOG', '2026-03-20 11:00:00', '2026-03-20 12:00:00', 35, 35, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (20, 'AV701', 'BGA', 'BOG', '2026-03-21 13:00:00', '2026-03-21 14:00:00', 45, 45, 190000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (21, 'AV801', 'ADZ', 'BOG', '2026-03-22 16:00:00', '2026-03-22 18:00:00', 60, 60, 450000.00, 'Avianca', 'ACTIVE', NOW(), NOW())
2026-02-18 14:40:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executed SQL script from class path resource [data.sql] in 10 ms.
2026-02-18 14:40:44 [main] INFO  o.s.b.a.s.r.ReactiveUserDetailsServiceAutoConfiguration - 

Using generated security password: 8b11d0e6-d464-45c4-8048-ffc0c1f774e6

2026-02-18 14:40:44 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2026-02-18 14:40:44 [main] INFO  o.s.b.w.e.netty.NettyWebServer - Netty started on port 8085
2026-02-18 14:40:44 [main] INFO  org.example.Main - Started Main in 3.893 seconds (process running for 4.317)
2026-02-18 14:40:48 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:40:48 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'POST /logout'
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'null /airline/auth/**'
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/flights/search', method=null}
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/flights/search'; against '/airline/flights/search'
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/flights/search' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x0000027a1a6a3a48@493627f7
2026-02-18 14:40:49 [parallel-13] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 14:40:49 [parallel-13] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/flights/search  | IP: 0:0:0:0:0:0:0:1 | Time: 2026-02-18T14:40:49.031809300
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Authorization = [Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTI2ODk3OSwiZXhwIjoxNzcxMzU1Mzc5fQ.WeTFRq_CfYemC_A-h3J2IU5aAihxIOiwtxXCvxfcGyg]
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [c945df18-9d7c-4f73-a3b7-0fb17f767f6f]
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [93]
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:40:49 [parallel-13] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:40:49 [reactor-http-nio-3] INFO  o.e.i.e.rest.FlightController - Recibida solicitud de búsqueda de vuelos: cartagena -> BOG
2026-02-18 14:40:49 [reactor-http-nio-3] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Buscando vuelos de cartagena a BOG para fecha: null
2026-02-18 14:40:49 [reactor-tcp-nio-10] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT * FROM flights WHERE origin = $1 AND destination = $2 AND status = 'ACTIVE' AND available_seats > 0]
2026-02-18 14:40:49 [reactor-tcp-nio-10] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Búsqueda de vuelos completada
2026-02-18 14:40:49 [reactor-http-nio-3] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/flights/search | Status: 200 | Duration: 409ms
2026-02-18 14:55:30 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2026-02-18 14:55:30 [main] INFO  org.example.Main - Starting Main using Java 21.0.10 with PID 22916 (C:\Users\NelsonAlejandroOrtiz\IdeaProjects\AirplaneTicketBooking\target\classes started by NelsonAlejandroOrtiz in C:\Users\NelsonAlejandroOrtiz\IdeaProjects\AirplaneTicketBooking)
2026-02-18 14:55:30 [main] DEBUG org.example.Main - Running with Spring Boot v3.2.2, Spring v6.1.3
2026-02-18 14:55:30 [main] INFO  org.example.Main - No active profile set, falling back to 1 default profile: "default"
2026-02-18 14:55:30 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2026-02-18 14:55:30 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 135 ms. Found 4 R2DBC repository interfaces.
2026-02-18 14:55:32 [main] INFO  o.e.infrastructure.config.JwtService - JwtService initialized with expiration: 86400000 ms
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executing SQL script from class path resource [schema.sql]
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS reservations CASCADE
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS flights CASCADE
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, username VARCHAR(50) UNIQUE NOT NULL, password VARCHAR(255) NOT NULL, first_name VARCHAR(30) NOT NULL, last_name VARCHAR(30) NOT NULL, email VARCHAR(100) UNIQUE NOT NULL, role VARCHAR(20) NOT NULL DEFAULT 'USER', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP )
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE flights ( flight_id SERIAL PRIMARY KEY, flight_number VARCHAR(20) UNIQUE NOT NULL, origin VARCHAR(30) NOT NULL, destination VARCHAR(30) NOT NULL, departure_time TIMESTAMP NOT NULL, arrival_time TIMESTAMP NOT NULL, available_seats INTEGER NOT NULL, total_seats INTEGER NOT NULL, price DECIMAL(10, 2) NOT NULL, airline VARCHAR(30) NOT NULL, status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP )
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, flight_id INTEGER NOT NULL, user_id INTEGER NOT NULL, passenger_name VARCHAR(30) NOT NULL, seat_number VARCHAR(10) NOT NULL, price DECIMAL(10, 2) NOT NULL, ticket_class VARCHAR(20) NOT NULL DEFAULT 'ECONOMY', status VARCHAR(20) NOT NULL DEFAULT 'CONFIRMED', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (flight_id) REFERENCES flights(flight_id), FOREIGN KEY (user_id) REFERENCES users(user_id) )
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE reservations ( reservation_id SERIAL PRIMARY KEY, user_id INTEGER NOT NULL, ticket_id INTEGER NOT NULL, flight_id INTEGER NOT NULL, status VARCHAR(20) NOT NULL DEFAULT 'CONFIRMED', observations VARCHAR(100), reservation_date TIMESTAMP NOT NULL, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (user_id) REFERENCES users(user_id), FOREIGN KEY (ticket_id) REFERENCES tickets(ticket_id), FOREIGN KEY (flight_id) REFERENCES flights(flight_id) )
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_flights_origin_destination ON flights(origin, destination)
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_flights_departure_time ON flights(departure_time)
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_tickets_user_id ON tickets(user_id)
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_tickets_flight_id ON tickets(flight_id)
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_reservations_user_id ON reservations(user_id)
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_reservations_status ON reservations(status)
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executed SQL script from class path resource [schema.sql] in 98 ms.
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executing SQL script from class path resource [data.sql]
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 1 returned as update count for SQL: INSERT INTO users (user_id, username, password, first_name, last_name, email, role, created_at, updated_at) VALUES (1, 'admin', '$2a$10$dXJ3SW6G7P50lGmMkkmwe.20cQQubK3.HZWzG3YB1tlRy.fqvM/BG', 'Admin', 'System', 'admin@airline.com', 'ADMIN', NOW(), NOW())
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 21 returned as update count for SQL: INSERT INTO flights (flight_id, flight_number, origin, destination, departure_time, arrival_time, available_seats, total_seats, price, airline, status, created_at, updated_at) VALUES (1, 'AV101', 'BOG', 'MDE', '2026-03-15 08:00:00', '2026-03-15 09:30:00', 50, 50, 250000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (2, 'AV102', 'BOG', 'CTG', '2026-03-16 10:00:00', '2026-03-16 11:30:00', 50, 50, 300000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (3, 'AV103', 'BOG', 'CLO', '2026-03-17 12:00:00', '2026-03-17 13:00:00', 30, 30, 280000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (4, 'LA201', 'BOG', 'BAQ', '2026-03-18 14:00:00', '2026-03-18 15:15:00', 80, 80, 180000.00, 'LATAM', 'ACTIVE', NOW(), NOW()), (5, 'AV104', 'BOG', 'SMR', '2026-03-19 07:00:00', '2026-03-19 08:30:00', 40, 40, 320000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (6, 'AV105', 'BOG', 'PEI', '2026-03-20 09:00:00', '2026-03-20 10:00:00', 35, 35, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (7, 'AV106', 'BOG', 'BGA', '2026-03-21 11:00:00', '2026-03-21 12:00:00', 45, 45, 190000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (8, 'AV107', 'BOG', 'ADZ', '2026-03-22 13:00:00', '2026-03-22 15:00:00', 60, 60, 450000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (9, 'AV201', 'MDE', 'BOG', '2026-03-15 10:00:00', '2026-03-15 11:30:00', 50, 50, 250000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (10, 'AV202', 'MDE', 'CTG', '2026-03-16 12:00:00', '2026-03-16 13:30:00', 40, 40, 270000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (11, 'AV203', 'MDE', 'CLO', '2026-03-17 14:00:00', '2026-03-17 15:00:00', 30, 30, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (12, 'WI301', 'CTG', 'BOG', '2026-03-19 16:00:00', '2026-03-19 17:30:00', 60, 60, 220000.00, 'Wingo', 'ACTIVE', NOW(), NOW()), (13, 'WI302', 'CTG', 'MDE', '2026-03-20 08:00:00', '2026-03-20 09:30:00', 45, 45, 270000.00, 'Wingo', 'ACTIVE', NOW(), NOW()), (14, 'LA301', 'CTG', 'CLO', '2026-03-21 10:00:00', '2026-03-21 11:30:00', 35, 35, 290000.00, 'LATAM', 'ACTIVE', NOW(), NOW()), (15, 'AV401', 'CLO', 'BOG', '2026-03-17 13:30:00', '2026-03-17 14:30:00', 30, 30, 280000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (16, 'AV402', 'CLO', 'MDE', '2026-03-18 15:00:00', '2026-03-18 16:00:00', 30, 30, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (17, 'LA401', 'BAQ', 'BOG', '2026-03-18 16:00:00', '2026-03-18 17:15:00', 80, 80, 180000.00, 'LATAM', 'ACTIVE', NOW(), NOW()), (18, 'AV501', 'SMR', 'BOG', '2026-03-19 09:00:00', '2026-03-19 10:30:00', 40, 40, 320000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (19, 'AV601', 'PEI', 'BOG', '2026-03-20 11:00:00', '2026-03-20 12:00:00', 35, 35, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (20, 'AV701', 'BGA', 'BOG', '2026-03-21 13:00:00', '2026-03-21 14:00:00', 45, 45, 190000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (21, 'AV801', 'ADZ', 'BOG', '2026-03-22 16:00:00', '2026-03-22 18:00:00', 60, 60, 450000.00, 'Avianca', 'ACTIVE', NOW(), NOW())
2026-02-18 14:55:32 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executed SQL script from class path resource [data.sql] in 11 ms.
2026-02-18 14:55:32 [main] INFO  o.s.b.a.s.r.ReactiveUserDetailsServiceAutoConfiguration - 

Using generated security password: 97b1c083-2812-4d8f-ba2e-747d5ffbd78f

2026-02-18 14:55:33 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2026-02-18 14:55:33 [main] INFO  o.s.b.w.e.netty.NettyWebServer - Netty started on port 8085
2026-02-18 14:55:33 [main] INFO  org.example.Main - Started Main in 3.884 seconds (process running for 4.284)
2026-02-18 14:55:40 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:55:40 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'POST /logout'
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'null /airline/auth/**'
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/flights/search', method=null}
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/flights/search'; against '/airline/flights/search'
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/flights/search' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x000001c6016a4c30@5b03e06e
2026-02-18 14:55:40 [parallel-13] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 14:55:40 [parallel-13] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/flights/search | IP: 0:0:0:0:0:0:0:1
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Authorization = [Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTI2ODk3OSwiZXhwIjoxNzcxMzU1Mzc5fQ.WeTFRq_CfYemC_A-h3J2IU5aAihxIOiwtxXCvxfcGyg]
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [702dc76f-982d-4b3a-a93e-e9c05a7c0093]
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [93]
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:55:40 [parallel-13] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:55:40 [reactor-http-nio-3] INFO  o.e.i.e.rest.FlightController - Recibida solicitud de búsqueda de vuelos: cartagena -> BOG
2026-02-18 14:55:40 [reactor-http-nio-3] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Buscando vuelos de cartagena a BOG para fecha: null
2026-02-18 14:55:40 [reactor-tcp-nio-10] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT * FROM flights WHERE origin = $1 AND destination = $2 AND status = 'ACTIVE' AND available_seats > 0]
2026-02-18 14:55:41 [reactor-tcp-nio-10] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Búsqueda de vuelos completada
2026-02-18 14:55:41 [reactor-http-nio-3] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/flights/search | Status: 200 | Duration: 394ms
2026-02-18 14:55:47 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:55:47 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'POST /logout'
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'null /airline/auth/**'
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/flights/search', method=null}
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/flights/search'; against '/airline/flights/search'
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/flights/search' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x000001c6016a4c30@5b03e06e
2026-02-18 14:55:47 [parallel-1] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 14:55:47 [parallel-1] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/flights/search | IP: 0:0:0:0:0:0:0:1
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Authorization = [Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTI2ODk3OSwiZXhwIjoxNzcxMzU1Mzc5fQ.WeTFRq_CfYemC_A-h3J2IU5aAihxIOiwtxXCvxfcGyg]
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [08181ba1-2f2e-4764-9732-d4ae2eb36183]
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [93]
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:55:47 [parallel-1] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:55:47 [reactor-http-nio-3] INFO  o.e.i.e.rest.FlightController - Recibida solicitud de búsqueda de vuelos: cartagena -> BOG
2026-02-18 14:55:47 [reactor-http-nio-3] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Buscando vuelos de cartagena a BOG para fecha: null
2026-02-18 14:55:47 [reactor-tcp-nio-10] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT * FROM flights WHERE origin = $1 AND destination = $2 AND status = 'ACTIVE' AND available_seats > 0]
2026-02-18 14:55:47 [reactor-tcp-nio-10] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Búsqueda de vuelos completada
2026-02-18 14:55:47 [reactor-http-nio-3] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/flights/search | Status: 200 | Duration: 13ms
2026-02-18 14:56:00 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:56:00 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'POST /logout'
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'null /airline/auth/**'
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/flights/search', method=null}
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/flights/search'; against '/airline/flights/search'
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/flights/search' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x000001c6016a4c30@5b03e06e
2026-02-18 14:56:00 [parallel-3] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 14:56:00 [parallel-3] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/flights/search | IP: 0:0:0:0:0:0:0:1
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Authorization = [Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTI2ODk3OSwiZXhwIjoxNzcxMzU1Mzc5fQ.WeTFRq_CfYemC_A-h3J2IU5aAihxIOiwtxXCvxfcGyg]
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [9fc2f86a-fe3f-4685-89f6-21a908a8f0ac]
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [78]
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:56:00 [parallel-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:56:00 [reactor-http-nio-3] INFO  o.e.i.e.rest.FlightController - Recibida solicitud de búsqueda de vuelos: cartagena -> BOG
2026-02-18 14:56:00 [reactor-http-nio-3] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Buscando vuelos de cartagena a BOG para fecha: null
2026-02-18 14:56:00 [reactor-tcp-nio-10] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT * FROM flights WHERE origin = $1 AND destination = $2 AND status = 'ACTIVE' AND available_seats > 0]
2026-02-18 14:56:00 [reactor-tcp-nio-10] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Búsqueda de vuelos completada
2026-02-18 14:56:00 [reactor-http-nio-3] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/flights/search | Status: 200 | Duration: 13ms
2026-02-18 14:58:42 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2026-02-18 14:58:42 [main] INFO  org.example.Main - Starting Main using Java 21.0.10 with PID 21764 (C:\Users\NelsonAlejandroOrtiz\IdeaProjects\AirplaneTicketBooking\target\classes started by NelsonAlejandroOrtiz in C:\Users\NelsonAlejandroOrtiz\IdeaProjects\AirplaneTicketBooking)
2026-02-18 14:58:42 [main] DEBUG org.example.Main - Running with Spring Boot v3.2.2, Spring v6.1.3
2026-02-18 14:58:42 [main] INFO  org.example.Main - No active profile set, falling back to 1 default profile: "default"
2026-02-18 14:58:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2026-02-18 14:58:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 4 R2DBC repository interfaces.
2026-02-18 14:58:44 [main] INFO  o.e.infrastructure.config.JwtService - JwtService initialized with expiration: 86400000 ms
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executing SQL script from class path resource [schema.sql]
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS reservations CASCADE
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS flights CASCADE
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, username VARCHAR(50) UNIQUE NOT NULL, password VARCHAR(255) NOT NULL, first_name VARCHAR(30) NOT NULL, last_name VARCHAR(30) NOT NULL, email VARCHAR(100) UNIQUE NOT NULL, role VARCHAR(20) NOT NULL DEFAULT 'USER', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP )
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE flights ( flight_id SERIAL PRIMARY KEY, flight_number VARCHAR(20) UNIQUE NOT NULL, origin VARCHAR(30) NOT NULL, destination VARCHAR(30) NOT NULL, departure_time TIMESTAMP NOT NULL, arrival_time TIMESTAMP NOT NULL, available_seats INTEGER NOT NULL, total_seats INTEGER NOT NULL, price DECIMAL(10, 2) NOT NULL, airline VARCHAR(30) NOT NULL, status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP )
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, flight_id INTEGER NOT NULL, user_id INTEGER NOT NULL, passenger_name VARCHAR(30) NOT NULL, seat_number VARCHAR(10) NOT NULL, price DECIMAL(10, 2) NOT NULL, ticket_class VARCHAR(20) NOT NULL DEFAULT 'ECONOMY', status VARCHAR(20) NOT NULL DEFAULT 'CONFIRMED', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (flight_id) REFERENCES flights(flight_id), FOREIGN KEY (user_id) REFERENCES users(user_id) )
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE reservations ( reservation_id SERIAL PRIMARY KEY, user_id INTEGER NOT NULL, ticket_id INTEGER NOT NULL, flight_id INTEGER NOT NULL, status VARCHAR(20) NOT NULL DEFAULT 'CONFIRMED', observations VARCHAR(100), reservation_date TIMESTAMP NOT NULL, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (user_id) REFERENCES users(user_id), FOREIGN KEY (ticket_id) REFERENCES tickets(ticket_id), FOREIGN KEY (flight_id) REFERENCES flights(flight_id) )
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_flights_origin_destination ON flights(origin, destination)
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_flights_departure_time ON flights(departure_time)
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_tickets_user_id ON tickets(user_id)
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_tickets_flight_id ON tickets(flight_id)
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_reservations_user_id ON reservations(user_id)
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 0 returned as update count for SQL: CREATE INDEX idx_reservations_status ON reservations(status)
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executed SQL script from class path resource [schema.sql] in 88 ms.
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executing SQL script from class path resource [data.sql]
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 1 returned as update count for SQL: INSERT INTO users (user_id, username, password, first_name, last_name, email, role, created_at, updated_at) VALUES (1, 'admin', '$2a$10$dXJ3SW6G7P50lGmMkkmwe.20cQQubK3.HZWzG3YB1tlRy.fqvM/BG', 'Admin', 'System', 'admin@airline.com', 'ADMIN', NOW(), NOW())
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - 21 returned as update count for SQL: INSERT INTO flights (flight_id, flight_number, origin, destination, departure_time, arrival_time, available_seats, total_seats, price, airline, status, created_at, updated_at) VALUES (1, 'AV101', 'BOG', 'MDE', '2026-03-15 08:00:00', '2026-03-15 09:30:00', 50, 50, 250000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (2, 'AV102', 'BOG', 'CTG', '2026-03-16 10:00:00', '2026-03-16 11:30:00', 50, 50, 300000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (3, 'AV103', 'BOG', 'CLO', '2026-03-17 12:00:00', '2026-03-17 13:00:00', 30, 30, 280000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (4, 'LA201', 'BOG', 'BAQ', '2026-03-18 14:00:00', '2026-03-18 15:15:00', 80, 80, 180000.00, 'LATAM', 'ACTIVE', NOW(), NOW()), (5, 'AV104', 'BOG', 'SMR', '2026-03-19 07:00:00', '2026-03-19 08:30:00', 40, 40, 320000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (6, 'AV105', 'BOG', 'PEI', '2026-03-20 09:00:00', '2026-03-20 10:00:00', 35, 35, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (7, 'AV106', 'BOG', 'BGA', '2026-03-21 11:00:00', '2026-03-21 12:00:00', 45, 45, 190000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (8, 'AV107', 'BOG', 'ADZ', '2026-03-22 13:00:00', '2026-03-22 15:00:00', 60, 60, 450000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (9, 'AV201', 'MDE', 'BOG', '2026-03-15 10:00:00', '2026-03-15 11:30:00', 50, 50, 250000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (10, 'AV202', 'MDE', 'CTG', '2026-03-16 12:00:00', '2026-03-16 13:30:00', 40, 40, 270000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (11, 'AV203', 'MDE', 'CLO', '2026-03-17 14:00:00', '2026-03-17 15:00:00', 30, 30, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (12, 'WI301', 'CTG', 'BOG', '2026-03-19 16:00:00', '2026-03-19 17:30:00', 60, 60, 220000.00, 'Wingo', 'ACTIVE', NOW(), NOW()), (13, 'WI302', 'CTG', 'MDE', '2026-03-20 08:00:00', '2026-03-20 09:30:00', 45, 45, 270000.00, 'Wingo', 'ACTIVE', NOW(), NOW()), (14, 'LA301', 'CTG', 'CLO', '2026-03-21 10:00:00', '2026-03-21 11:30:00', 35, 35, 290000.00, 'LATAM', 'ACTIVE', NOW(), NOW()), (15, 'AV401', 'CLO', 'BOG', '2026-03-17 13:30:00', '2026-03-17 14:30:00', 30, 30, 280000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (16, 'AV402', 'CLO', 'MDE', '2026-03-18 15:00:00', '2026-03-18 16:00:00', 30, 30, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (17, 'LA401', 'BAQ', 'BOG', '2026-03-18 16:00:00', '2026-03-18 17:15:00', 80, 80, 180000.00, 'LATAM', 'ACTIVE', NOW(), NOW()), (18, 'AV501', 'SMR', 'BOG', '2026-03-19 09:00:00', '2026-03-19 10:30:00', 40, 40, 320000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (19, 'AV601', 'PEI', 'BOG', '2026-03-20 11:00:00', '2026-03-20 12:00:00', 35, 35, 200000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (20, 'AV701', 'BGA', 'BOG', '2026-03-21 13:00:00', '2026-03-21 14:00:00', 45, 45, 190000.00, 'Avianca', 'ACTIVE', NOW(), NOW()), (21, 'AV801', 'ADZ', 'BOG', '2026-03-22 16:00:00', '2026-03-22 18:00:00', 60, 60, 450000.00, 'Avianca', 'ACTIVE', NOW(), NOW())
2026-02-18 14:58:44 [reactor-tcp-nio-1] DEBUG o.s.r.connection.init.ScriptUtils - Executed SQL script from class path resource [data.sql] in 10 ms.
2026-02-18 14:58:44 [main] INFO  o.s.b.a.s.r.ReactiveUserDetailsServiceAutoConfiguration - 

Using generated security password: 7d8e8fb8-88ed-40a9-b2c4-d18675e641d1

2026-02-18 14:58:45 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2026-02-18 14:58:45 [main] INFO  o.s.b.w.e.netty.NettyWebServer - Netty started on port 8085
2026-02-18 14:58:45 [main] INFO  org.example.Main - Started Main in 3.814 seconds (process running for 4.247)
2026-02-18 14:58:49 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:58:49 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'POST /logout'
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'null /airline/auth/**'
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/flights/search', method=null}
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/flights/search'; against '/airline/flights/search'
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/flights/search' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x00000271e16a2880@3e91462d
2026-02-18 14:58:49 [parallel-13] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 14:58:49 [parallel-13] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/flights/search | IP: 0:0:0:0:0:0:0:1
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Authorization = [Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTI2ODk3OSwiZXhwIjoxNzcxMzU1Mzc5fQ.WeTFRq_CfYemC_A-h3J2IU5aAihxIOiwtxXCvxfcGyg]
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [31e10748-ab23-4486-b2ce-da82ff73881d]
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [94]
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:58:49 [parallel-13] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:58:49 [reactor-http-nio-3] INFO  o.e.i.e.rest.FlightController - Recibida solicitud de búsqueda de vuelos: cartagena -> BOG
2026-02-18 14:58:49 [reactor-http-nio-3] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Buscando vuelos de cartagena a BOG para fecha: 2026-03-19T16:00
2026-02-18 14:58:49 [reactor-tcp-nio-10] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT * FROM flights WHERE origin = $1 AND destination = $2 AND DATE(departure_time) = DATE($3) AND status = 'ACTIVE' AND available_seats > 0]
2026-02-18 14:58:49 [reactor-tcp-nio-10] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Búsqueda de vuelos completada
2026-02-18 14:58:49 [reactor-http-nio-3] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/flights/search | Status: 200 | Duration: 500ms
2026-02-18 14:58:59 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:58:59 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'POST /logout'
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'null /airline/auth/**'
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/flights/search', method=null}
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/flights/search'; against '/airline/flights/search'
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/flights/search' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x00000271e16a2880@3e91462d
2026-02-18 14:58:59 [parallel-1] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 14:58:59 [parallel-1] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/flights/search | IP: 0:0:0:0:0:0:0:1
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Authorization = [Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTI2ODk3OSwiZXhwIjoxNzcxMzU1Mzc5fQ.WeTFRq_CfYemC_A-h3J2IU5aAihxIOiwtxXCvxfcGyg]
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [12b0c129-07f9-4dce-9384-c5bfdb017628]
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [51]
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:58:59 [parallel-1] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:58:59 [reactor-http-nio-3] INFO  o.e.i.e.rest.FlightController - Recibida solicitud de búsqueda de vuelos: cartagena -> BOG
2026-02-18 14:58:59 [reactor-http-nio-3] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Buscando vuelos de cartagena a BOG para fecha: null
2026-02-18 14:58:59 [reactor-tcp-nio-10] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT * FROM flights WHERE origin = $1 AND destination = $2 AND status = 'ACTIVE' AND available_seats > 0]
2026-02-18 14:58:59 [reactor-tcp-nio-10] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Búsqueda de vuelos completada
2026-02-18 14:58:59 [reactor-http-nio-3] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/flights/search | Status: 200 | Duration: 15ms
2026-02-18 14:59:13 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:59:13 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'POST /logout'
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'null /airline/auth/**'
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/flights/search', method=null}
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/flights/search'; against '/airline/flights/search'
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/flights/search' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x00000271e16a2880@3e91462d
2026-02-18 14:59:13 [parallel-3] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 14:59:13 [parallel-3] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/flights/search | IP: 0:0:0:0:0:0:0:1
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Authorization = [Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTI2ODk3OSwiZXhwIjoxNzcxMzU1Mzc5fQ.WeTFRq_CfYemC_A-h3J2IU5aAihxIOiwtxXCvxfcGyg]
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [627f40ab-f78b-4510-b2a2-6e2cb3257740]
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [85]
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:59:13 [parallel-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:59:13 [reactor-http-nio-3] ERROR o.e.i.e.r.e.GlobalExceptionHandler - Error interno del servidor: 400 BAD_REQUEST "Failed to read HTTP message"
org.springframework.web.server.ServerWebInputException: 400 BAD_REQUEST "Failed to read HTTP message"
	at org.springframework.web.reactive.result.method.annotation.AbstractMessageReaderArgumentResolver.handleReadError(AbstractMessageReaderArgumentResolver.java:237)
	at org.springframework.web.reactive.result.method.annotation.AbstractMessageReaderArgumentResolver.lambda$readBody$3(AbstractMessageReaderArgumentResolver.java:202)
	at reactor.core.publisher.Mono.lambda$onErrorMap$28(Mono.java:3799)
	at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94)
	at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:136)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)
	at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)
	at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)
	at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2097)
	at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)
	at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)
	at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)
	at reactor.netty.channel.FluxReceive.terminateReceiver(FluxReceive.java:483)
	at reactor.netty.channel.FluxReceive.drainReceiver(FluxReceive.java:275)
	at reactor.netty.channel.FluxReceive.request(FluxReceive.java:133)
	at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164)
	at reactor.core.publisher.FluxPeek$PeekSubscriber.request(FluxPeek.java:138)
	at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164)
	at reactor.core.publisher.Operators$BaseFluxToMonoOperator.request(Operators.java:2067)
	at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.request(FluxFilterFuseable.java:411)
	at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.request(FluxMapFuseable.java:360)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)
	at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367)
	at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onSubscribe(FluxOnErrorResume.java:74)
	at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)
	at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onSubscribe(FluxMapFuseable.java:265)
	at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onSubscribe(FluxFilterFuseable.java:305)
	at reactor.core.publisher.Operators$BaseFluxToMonoOperator.onSubscribe(Operators.java:2051)
	at reactor.core.publisher.FluxMap$MapSubscriber.onSubscribe(FluxMap.java:92)
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onSubscribe(FluxPeek.java:171)
	at reactor.core.publisher.FluxMap$MapSubscriber.onSubscribe(FluxMap.java:92)
	at reactor.netty.channel.FluxReceive.startReceiver(FluxReceive.java:172)
	at reactor.netty.channel.FluxReceive.lambda$subscribe$2(FluxReceive.java:150)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.springframework.core.codec.DecodingException: JSON decoding error: Cannot deserialize value of type `java.time.LocalDateTime` from String "2026-03-15": Failed to deserialize java.time.LocalDateTime: (java.time.format.DateTimeParseException) Text '2026-03-15' could not be parsed at index 2
	at org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:275)
	at org.springframework.http.codec.json.AbstractJackson2Decoder.decode(AbstractJackson2Decoder.java:211)
	at org.springframework.http.codec.json.AbstractJackson2Decoder.lambda$decodeToMono$2(AbstractJackson2Decoder.java:191)
	at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)
	... 39 common frames omitted
Caused by: com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `java.time.LocalDateTime` from String "2026-03-15": Failed to deserialize java.time.LocalDateTime: (java.time.format.DateTimeParseException) Text '2026-03-15' could not be parsed at index 2
 at [Source: (org.springframework.core.io.buffer.DataBufferInputStream); line: 4, column: 21] (through reference chain: org.example.infrastructure.entrypoints.rest.dto.request.FlightSearchRequestDTO["departureDate"])
	at com.fasterxml.jackson.databind.exc.InvalidFormatException.from(InvalidFormatException.java:67)
	at com.fasterxml.jackson.databind.DeserializationContext.weirdStringException(DeserializationContext.java:2002)
	at com.fasterxml.jackson.databind.DeserializationContext.handleWeirdStringValue(DeserializationContext.java:1230)
	at com.fasterxml.jackson.datatype.jsr310.deser.JSR310DeserializerBase._handleDateTimeException(JSR310DeserializerBase.java:176)
	at com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer._fromString(LocalDateTimeDeserializer.java:179)
	at com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer.deserialize(LocalDateTimeDeserializer.java:81)
	at com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer.deserialize(LocalDateTimeDeserializer.java:40)
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:392)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:185)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)
	at com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:2105)
	at com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1481)
	at org.springframework.http.codec.json.AbstractJackson2Decoder.decode(AbstractJackson2Decoder.java:206)
	... 41 common frames omitted
Caused by: java.time.format.DateTimeParseException: Text '2026-03-15' could not be parsed at index 2
	at java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2108)
	at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:2010)
	at java.base/java.time.LocalDateTime.parse(LocalDateTime.java:494)
	at com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer._fromString(LocalDateTimeDeserializer.java:177)
	... 50 common frames omitted
2026-02-18 14:59:13 [reactor-http-nio-3] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/flights/search | Status: 500 | Duration: 14ms
2026-02-18 14:59:24 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:59:24 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'POST /logout'
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'null /airline/auth/**'
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/flights/search', method=null}
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/flights/search'; against '/airline/flights/search'
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/flights/search' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x00000271e16a2880@3e91462d
2026-02-18 14:59:24 [parallel-4] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 14:59:24 [parallel-4] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/flights/search | IP: 0:0:0:0:0:0:0:1
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Authorization = [Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTI2ODk3OSwiZXhwIjoxNzcxMzU1Mzc5fQ.WeTFRq_CfYemC_A-h3J2IU5aAihxIOiwtxXCvxfcGyg]
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [8f473b17-80b9-4407-836f-6239592c211f]
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [94]
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:59:24 [parallel-4] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:59:24 [reactor-http-nio-3] INFO  o.e.i.e.rest.FlightController - Recibida solicitud de búsqueda de vuelos: cartagena -> BOG
2026-02-18 14:59:24 [reactor-http-nio-3] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Buscando vuelos de cartagena a BOG para fecha: 2026-01-01T23:59:59
2026-02-18 14:59:24 [reactor-tcp-nio-10] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT * FROM flights WHERE origin = $1 AND destination = $2 AND DATE(departure_time) = DATE($3) AND status = 'ACTIVE' AND available_seats > 0]
2026-02-18 14:59:24 [reactor-tcp-nio-10] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Búsqueda de vuelos completada
2026-02-18 14:59:24 [reactor-http-nio-3] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/flights/search | Status: 200 | Duration: 12ms
2026-02-18 14:59:36 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:59:36 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'POST /logout'
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'null /airline/auth/**'
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/flights/search', method=null}
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/flights/search'; against '/airline/flights/search'
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/flights/search' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x00000271e16a2880@3e91462d
2026-02-18 14:59:36 [parallel-6] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 14:59:36 [parallel-6] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/flights/search | IP: 0:0:0:0:0:0:0:1
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Authorization = [Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTI2ODk3OSwiZXhwIjoxNzcxMzU1Mzc5fQ.WeTFRq_CfYemC_A-h3J2IU5aAihxIOiwtxXCvxfcGyg]
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [c1fda3e5-3a0f-447b-b737-2b023480b6f9]
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [94]
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:59:36 [parallel-6] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:59:36 [reactor-http-nio-3] INFO  o.e.i.e.rest.FlightController - Recibida solicitud de búsqueda de vuelos: cartagena -> BOG
2026-02-18 14:59:36 [reactor-http-nio-3] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Buscando vuelos de cartagena a BOG para fecha: 2026-12-25T00:00
2026-02-18 14:59:36 [reactor-tcp-nio-10] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT * FROM flights WHERE origin = $1 AND destination = $2 AND DATE(departure_time) = DATE($3) AND status = 'ACTIVE' AND available_seats > 0]
2026-02-18 14:59:36 [reactor-tcp-nio-10] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Búsqueda de vuelos completada
2026-02-18 14:59:36 [reactor-http-nio-3] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/flights/search | Status: 200 | Duration: 11ms
2026-02-18 14:59:46 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:59:46 [reactor-http-nio-3] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'POST /logout'
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/flights/search' doesn't match 'null /airline/auth/**'
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/flights/search', method=null}
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/flights/search'; against '/airline/flights/search'
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/flights/search' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x00000271e16a2880@3e91462d
2026-02-18 14:59:46 [parallel-8] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 14:59:46 [parallel-8] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/flights/search | IP: 0:0:0:0:0:0:0:1
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Authorization = [Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTI2ODk3OSwiZXhwIjoxNzcxMzU1Mzc5fQ.WeTFRq_CfYemC_A-h3J2IU5aAihxIOiwtxXCvxfcGyg]
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [f7978390-628c-42b4-b022-bf5c35b2e1d4]
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [51]
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/flights/search
2026-02-18 14:59:46 [parallel-8] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 14:59:46 [reactor-http-nio-3] INFO  o.e.i.e.rest.FlightController - Recibida solicitud de búsqueda de vuelos: cartagena -> BOG
2026-02-18 14:59:46 [reactor-http-nio-3] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Buscando vuelos de cartagena a BOG para fecha: null
2026-02-18 14:59:46 [reactor-tcp-nio-10] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT * FROM flights WHERE origin = $1 AND destination = $2 AND status = 'ACTIVE' AND available_seats > 0]
2026-02-18 14:59:46 [reactor-tcp-nio-10] INFO  o.e.a.u.SearchFlightsUseCaseImpl - Búsqueda de vuelos completada
2026-02-18 14:59:46 [reactor-http-nio-3] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/flights/search | Status: 200 | Duration: 15ms
2026-02-18 15:11:49 [reactor-http-nio-5] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/auth/login
2026-02-18 15:11:49 [reactor-http-nio-5] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 15:11:49 [parallel-10] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}
2026-02-18 15:11:49 [parallel-10] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Request 'POST /airline/auth/login' doesn't match 'POST /logout'
2026-02-18 15:11:49 [parallel-10] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - No matches found
2026-02-18 15:11:49 [parallel-10] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/airline/auth/**', method=null}
2026-02-18 15:11:49 [parallel-10] DEBUG o.s.s.w.s.u.m.PathPatternParserServerWebExchangeMatcher - Checking match of request : '/airline/auth/login'; against '/airline/auth/**'
2026-02-18 15:11:49 [parallel-10] DEBUG o.s.s.w.s.u.m.OrServerWebExchangeMatcher - matched
2026-02-18 15:11:49 [parallel-10] DEBUG o.s.s.w.s.a.DelegatingReactiveAuthorizationManager - Checking authorization on '/airline/auth/login' using org.springframework.security.config.web.server.ServerHttpSecurity$AuthorizeExchangeSpec$Access$$Lambda/0x00000271e16a2880@3e91462d
2026-02-18 15:11:49 [parallel-10] DEBUG o.s.s.w.s.a.AuthorizationWebFilter - Authorization successful
2026-02-18 15:11:49 [parallel-10] INFO  o.e.i.config.RequestLoggingWebFilter - ==> [REQUEST] POST /airline/auth/login | IP: 0:0:0:0:0:0:0:1
2026-02-18 15:11:49 [parallel-10] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Type = [application/json]
2026-02-18 15:11:49 [parallel-10] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: User-Agent = [PostmanRuntime/7.51.1]
2026-02-18 15:11:49 [parallel-10] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept = [*/*]
2026-02-18 15:11:49 [parallel-10] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Postman-Token = [f1b6a7de-c8f6-4eea-886b-70d274e197dc]
2026-02-18 15:11:49 [parallel-10] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Host = [localhost:8085]
2026-02-18 15:11:49 [parallel-10] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Accept-Encoding = [gzip, deflate, br]
2026-02-18 15:11:49 [parallel-10] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Connection = [keep-alive]
2026-02-18 15:11:49 [parallel-10] DEBUG o.e.i.config.RequestLoggingWebFilter -     Header: Content-Length = [51]
2026-02-18 15:11:49 [parallel-10] DEBUG o.e.i.config.JwtAuthenticationFilter - Processing request to: /airline/auth/login
2026-02-18 15:11:49 [parallel-10] DEBUG o.e.i.config.JwtAuthenticationFilter - Public path, skipping JWT validation
2026-02-18 15:11:49 [reactor-http-nio-5] INFO  o.e.a.u.AuthenticateUserUseCaseImpl - Intento de login para usuario: admin
2026-02-18 15:11:49 [reactor-tcp-nio-10] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT * FROM users WHERE username = $1]
2026-02-18 15:11:49 [reactor-tcp-nio-10] INFO  o.e.a.u.AuthenticateUserUseCaseImpl - Login exitoso para usuario: admin
2026-02-18 15:11:49 [reactor-http-nio-5] INFO  o.e.i.config.RequestLoggingWebFilter - <== [RESPONSE] POST /airline/auth/login | Status: 200 | Duration: 222ms
